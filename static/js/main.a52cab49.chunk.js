(this["webpackJsonpreact-game"]=this["webpackJsonpreact-game"]||[]).push([[0],{29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},33:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),c=a(10),o=a.n(c),i=(a(29),a(24)),l=a(19),r=(a(30),a(6)),d=a(7),u=a(9),b=a(8),m=(a(31),a(0)),h=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"header",children:[Object(m.jsx)("h1",{children:"Snake Game"}),Object(m.jsx)("span",{children:"Use the arrow keys or W/A/S/D to play"}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{children:"Double click the game field to go fullscreen"})]})}}]),a}(n.a.Component),p=a(18),f=(a(33),a(11)),j=a(12),S=a(13),x=a(23),O=(a(34),a(21)),g=a.n(O),v=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).goFullscreen=function(){e.props.fullscreen()},e.changeDirection=function(t){var a=e.state.direction;switch(t.code){case"ArrowLeft":case"KeyA":"x+"!==a&&(a="x-");break;case"ArrowUp":case"KeyW":"y-"!==a&&(a="y+");break;case"ArrowRight":case"KeyD":"x-"!==a&&(a="x+");break;case"ArrowDown":case"KeyS":"y+"!==a&&(a="y-")}e.setState({direction:a})},e.gameTableInit=function(){for(var t=[[]],a=[],s=0;s<e.state.fieldY;s++){t.push([]);for(var n=0;n<e.state.fieldX;n++)t[s].push(0)}var c=Math.floor(e.state.fieldY/2),o=Math.floor(e.state.fieldX/2);t[c][o]=t[c][o+1]=1,t.pop(),e.setState({fieldXxY:t}),a.push("".concat(c,"-").concat(o),"".concat(c,"-").concat(o+1)),e.setState({snake:a}),e.setState({snakeSpeed:e.state.snakeSpeedInit})},e.snakeDraw=function(){var t=e.state.fieldXxY.map((function(e){return e.map((function(e){return 1===e?0:e}))}));t=t.map((function(t,a){return t.map((function(t,s){return e.state.snake.includes("".concat(a.toString(),"-").concat(s.toString()))?1:t}))})),e.setState({fieldXxY:t})},e.playSound=function(t){e.state.isSound&&t.play()},e.startGame=function(){e.state.autoPlayIsRunning||(e.playSound(e.state.audioBut),e.playSound(e.state.audioStart),e.finishTheGame(),e.setState({settingsOpen:!1}),e.setState({gameIsOver:!1}),e.setState({score:0}),e.setState({hiScore:e.state.hiScore<e.state.score?e.state.score:e.state.hiScore}),e.setState({gameIsRunning:!0}),e.setState((function(e){return{isPaused:!0}}))),e.gameTableInit(),e.setState({direction:"x+"}),setTimeout(e.createFood,e.state.foodTimer),e.setState({snakeTimer:setInterval(e.move,e.state.snakeSpeed)}),e.state.obstacles&&e.setState({obstacleTimer:setInterval(e.createObstacle,e.state.obstacleInt)}),e.state.obstaclesDisap&&e.setState({noObstacleTimer:setInterval(e.deleteObstacle,e.state.noObstacleInt)}),e.state.autoPlayIsRunning&&e.setState({autoplayTimer:setInterval(e.autoplay,e.state.autoplayInt)})},e.autoplay=function(){for(var t=e.state.fieldXxY,a=[],s=[+e.state.snake[e.state.snake.length-1].split("-")[0],+e.state.snake[e.state.snake.length-1].split("-")[1]],n=0;n<e.state.fieldY;n++)for(var c=0;c<e.state.fieldX;c++)e.state.foodList.includes(t[n][c])&&(a=[]).push(n,c);switch(e.state.direction){case"x+":a[1]<=s[1]&&(a[0]>s[0]?e.setState({direction:"y-"}):e.setState({direction:"y+"}));break;case"x-":a[1]>=s[1]&&(a[0]<s[0]?e.setState({direction:"y+"}):e.setState({direction:"y-"}));break;case"y+":a[0]>=s[0]&&(a[1]>s[1]?e.setState({direction:"x+"}):e.setState({direction:"x-"}));break;case"y-":a[0]<=s[0]&&(a[1]>s[1]?e.setState({direction:"x+"}):e.setState({direction:"x-"}))}},e.createFood=function(){e.playSound(e.state.audioFood),e.createFoodOrObstacle(e.state.foodList[Math.floor(Math.random()*e.state.foodList.length)])},e.createObstacle=function(){e.playSound(e.state.audioBomb),e.createFoodOrObstacle(3)},e.deleteObstacle=function(){var t=e.state,a=t.obstaclesArr,s=t.fieldXxY,n=Math.floor(Math.random()*a.length);s[a[n].split("-")[0]][a[n].split("-")[1]]=0,a.splice(n,1),e.setState({obstaclesArr:a}),e.setState({fieldXxY:s})},e.createFoodOrObstacle=function(t){for(var a=e.state.fieldXxY;;){var s=Math.floor(Math.random()*e.state.fieldX),n=Math.floor(Math.random()*e.state.fieldY);if(0===a[n][s]){a[n][s]=t;break}}3===t&&e.setState({obstaclesArr:[].concat(Object(p.a)(e.state.obstaclesArr),["".concat(n,"-").concat(s)])}),e.setState({fieldXxY:a})},e.fieldNumber=function(t){var a=Object(p.a)(t.split("-")),s=a[0],n=a[1];return e.state.fieldXxY[+s][+n]},e.move=function(){var t,a=e.state,s=a.direction,n=a.snake,c=a.noWalls,o=n[n.length-1].split("-"),i=o[1],l=o[0];switch(s){case"x-":i=parseInt(o[1])-1;break;case"x+":i=parseInt(o[1])+1;break;case"y+":l=parseInt(o[0])-1;break;case"y-":l=parseInt(o[0])+1}(i>e.state.fieldX-1||i<0||l>e.state.fieldY-1||l<0)&&(c?(i>e.state.fieldX-1&&(i=0),i<0&&(i=e.state.fieldX-1),l>e.state.fieldY-1&&(l=0),l<0&&(l=e.state.fieldY-1)):(e.playSound(e.state.audioPunch),e.finishTheGame(),setTimeout(e.finAudio,2e3))),t="".concat(l,"-").concat(i),n.includes(t)&&(e.playSound(e.state.audioPunch),e.finishTheGame(),setTimeout(e.finAudio,2e3));var r=n;r.push(t),e.setState({snake:r}),3===e.fieldNumber(t)&&(e.boom(t),e.finishTheGame(),setTimeout(e.finAudio,2e3)),e.state.foodList.includes(e.fieldNumber(t))?(e.playSound(e.state.audioEat),setTimeout(e.createFood,e.state.foodTimer),e.state.gameIsRunning&&e.setState({score:e.state.score+1})):(e.state.gameIsRunning||e.state.autoPlayIsRunning)&&(n.splice(0,1),e.setState({snake:n}),e.snakeDraw())},e.boom=function(t){var a=e.state.fieldXxY,s=+t.split("-")[1];a[+t.split("-")[0]][s]=5,e.setState({fieldXxY:a});var n=1;e.playSound(e.state.audioExp);for(var c=e.state.fieldXxY;n<e.state.snake.length;){var o=Math.floor(Math.random()*e.state.fieldX),i=Math.floor(Math.random()*e.state.fieldY);0===c[i][o]&&(c[i][o]=4),n++}c=e.state.fieldXxY.map((function(e){return e.map((function(e){return 1===e?0:e}))})),e.setState({fieldXxY:c})},e.finishTheGame=function(){var t=e.state.fieldXxY.map((function(e){return e.map((function(e){return 1===e?4:e}))}));e.setState({fieldXxY:t}),e.setState({gameIsRunning:!1}),e.setState({gameIsOver:!0}),clearInterval(e.state.snakeTimer),clearInterval(e.state.obstacleTimer),clearInterval(e.state.noObstacleTimer)},e.finAudio=function(){e.playSound(e.state.audioLose)},e.fieldSizeChanged=function(t){e.setState({fieldX:+t.target.value.split("x")[0]}),e.setState({fieldY:+t.target.value.split("x")[1]})},e.soundCheckHandler=function(t){e.state.isSound||e.playSound(e.state.audioBut),e.setState({isSound:t})},e.wallsCheckHandler=function(t){e.playSound(e.state.audioBut),document.getElementById("game-table").style.border=t?"5px solid red":"none",e.setState({noWalls:!t})},e.obstaclesCheckHandler=function(t){e.playSound(e.state.audioBut),e.setState({obstacles:t}),t||e.setState({obstaclesDisap:t})},e.obstaclesDisapCheckHandler=function(t){e.playSound(e.state.audioBut),e.setState({obstaclesDisap:t})},e.obstaclesDisappCheckHandler=function(t){e.setState({obstaclesDisap:!t.target.value})},e.setRadioValue=function(t){e.playSound(e.state.audioBut),e.setState({radioValue:t}),console.log(t),e.setState({fieldX:+t.split("x")[0]}),e.setState({fieldY:+t.split("x")[1]})},e.setSnakeSpeed=function(t){var a=e.state.snakeSpeedInit-(t-50)*e.state.snakeSpeedInit/100;e.setState({snakeSpeed:a}),e.setState({speedSetting:t})},e.settingsOpen=function(){e.playSound(e.state.audioBut),e.setState({settingsOpen:!e.state.settingsOpen})},e.pauseGame=function(){e.playSound(e.state.audioBut),e.state.isPaused?(clearInterval(e.state.snakeTimer),clearInterval(e.state.obstacleTimer),clearInterval(e.state.noObstacleTimer),console.log("paused")):(e.setState({snakeTimer:setInterval(e.move,e.state.snakeSpeed)}),e.state.obstacles&&e.setState({obstacleTimer:setInterval(e.createObstacle,e.state.obstacleInt)}),e.state.obstaclesDisap&&e.setState({noObstacleTimer:setInterval(e.deleteObstacle,e.state.noObstacleInt)})),e.setState((function(e){return{isPaused:!e.isPaused}}))},e.startGameClick=function(){e.setState({gameIsRunning:!0}),e.startGame()},e.state={foodList:[2,11,12,13,14,15,16,17,18,19],fieldX:15,fieldY:15,fieldXxY:[],snake:[],obstaclesArr:[],snakeSpeedInit:300,snakeSpeed:0,foodTimer:1e3,obstacleInt:7e3,noObstacleInt:11e3,direction:"x+",gameIsRunning:!1,snakeTimer:null,obstacleTimer:null,noObstacleTimer:null,hiScore:0,score:0,obstacles:!0,obstaclesDisap:!0,noWalls:!0,radioValue:"15x15",settingsOpen:!1,audioExp:null,audioBut:null,audioEat:null,audioPunch:null,audioBomb:null,audioFood:null,audioStart:null,audioLose:null,speedSetting:50,isPaused:!0,isSound:!0,gameIsOver:!1,autoPlayIsRunning:!1,autoplayTimer:null,autoplayInt:100,FSmodeOn:!1,autoPlayStartInt:3e3},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.gameTableInit(),document.addEventListener("keydown",this.changeDirection),document.getElementById("game-table").addEventListener("dblclick",this.goFullscreen),this.setState({audioStart:document.getElementsByClassName("audio-start")[0]}),this.setState({audioExp:document.getElementsByClassName("audio-element")[0]}),this.setState({audioBut:document.getElementsByClassName("audio-button")[0]}),this.setState({audioEat:document.getElementsByClassName("audio-eat")[0]}),this.setState({audioPunch:document.getElementsByClassName("audio-punch")[0]}),this.setState({audioBomb:document.getElementsByClassName("audio-bomb")[0]}),this.setState({audioFood:document.getElementsByClassName("audio-food")[0]}),this.setState({audioLose:document.getElementsByClassName("audio-lose")[0]}),document.getElementById("game-table").style.border=this.state.noWalls?"none":"5px solid red"}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"game",children:[Object(m.jsx)("div",{className:"snake-field",children:Object(m.jsx)("table",{className:"game-table".concat(this.state.gameIsOver?"-over":""),id:"game-table",children:Object(m.jsx)("tbody",{children:this.state.fieldXxY.map((function(e,t){return Object(m.jsx)("tr",{className:"game-table-row row-".concat(t),children:e.map((function(e,a){return Object(m.jsx)("td",{className:"game-table-cell \n                                                    cell-".concat(t,"-").concat(a," \n                                                    game-table-cell-status-").concat(e)},"c-".concat(a))}))},"r-".concat(t))}))})})}),Object(m.jsxs)("div",{className:this.state.FSmodeOn?"scores-white":"scores-black",children:[Object(m.jsxs)("span",{children:["Hi-Score: ",this.state.hiScore]}),Object(m.jsx)("br",{}),Object(m.jsxs)("span",{children:["Score: ",this.state.score]})]}),Object(m.jsxs)("div",{className:"game-btns",children:[Object(m.jsx)(f.a,{variant:"dark",onClick:this.startGameClick,className:"mb-2",children:"New Game"}),Object(m.jsx)(f.a,{variant:"dark",onClick:this.pauseGame,className:"mb-2",disabled:!this.state.gameIsRunning,children:this.state.isPaused?"Pause":"Resume"})]}),Object(m.jsx)(f.a,{onClick:function(){return e.settingsOpen()},"aria-controls":"example-collapse-text","aria-expanded":this.state.settingsOpen,variant:"dark",className:"mb-2",children:"Settings"}),Object(m.jsx)(x.a,{in:this.state.settingsOpen,id:"settingsGroup",children:Object(m.jsxs)("div",{id:"collapse-settings",className:"settingsGroup mb-2",children:[Object(m.jsx)(j.a,{toggle:!0,className:"mb-2",children:[{name:"10x10",value:"10x10"},{name:"15x15",value:"15x15"},{name:"20x20",value:"20x20"}].map((function(t,a){return Object(m.jsx)(S.a,{type:"radio",variant:"dark",name:"radio",value:t.value,checked:e.state.radioValue===t.value,onChange:function(t){return e.setRadioValue(t.currentTarget.value)},children:t.name},a)}))}),Object(m.jsx)("span",{children:"Speed"}),Object(m.jsx)(g.a,{value:this.state.speedSetting,onChange:function(t){return e.setSnakeSpeed(t.target.value)}}),Object(m.jsx)(j.a,{toggle:!0,className:"mb-2",children:Object(m.jsx)(S.a,{type:"checkbox",variant:"dark",checked:this.state.isSound,value:"1",onChange:function(t){return e.soundCheckHandler(t.currentTarget.checked)},children:"Sound"})}),Object(m.jsx)(j.a,{toggle:!0,className:"mb-2",children:Object(m.jsx)(S.a,{type:"checkbox",variant:"dark",checked:!this.state.noWalls,value:"1",onChange:function(t){return e.wallsCheckHandler(t.currentTarget.checked)},children:"Walls"})}),Object(m.jsx)(j.a,{toggle:!0,className:"mb-2",children:Object(m.jsx)(S.a,{type:"checkbox",variant:"dark",checked:this.state.obstacles,value:"1",onChange:function(t){return e.obstaclesCheckHandler(t.currentTarget.checked)},children:"Obstacles"})}),Object(m.jsx)(j.a,{toggle:!0,className:"mb-2",children:Object(m.jsx)(S.a,{type:"checkbox",variant:"dark",checked:this.state.obstaclesDisap,value:"1",onChange:function(t){return e.obstaclesDisapCheckHandler(t.currentTarget.checked)},children:"Obstacles disappearing"})}),Object(m.jsx)("audio",{className:"audio-start",children:Object(m.jsx)("source",{src:"battle.mp3"})}),Object(m.jsx)("audio",{className:"audio-element",children:Object(m.jsx)("source",{src:"explosion.mp3"})}),Object(m.jsx)("audio",{className:"audio-button",children:Object(m.jsx)("source",{src:"button.mp3"})}),Object(m.jsx)("audio",{className:"audio-eat",children:Object(m.jsx)("source",{src:"eat.mp3"})}),Object(m.jsx)("audio",{className:"audio-punch",children:Object(m.jsx)("source",{src:"punch.mp3"})}),Object(m.jsx)("audio",{className:"audio-bomb",children:Object(m.jsx)("source",{src:"bomb.mp3"})}),Object(m.jsx)("audio",{className:"audio-food",children:Object(m.jsx)("source",{src:"food.mp3"})}),Object(m.jsx)("audio",{className:"audio-lose",children:Object(m.jsx)("source",{src:"lose.wav"})})]})})]})}}]),a}(n.a.Component),k=(a(37),function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"footer",children:[Object(m.jsx)("span",{children:"\xa9 2021"}),Object(m.jsx)("a",{href:"https://github.com/zavyalovdmitry",children:"zavyalovdmitry"}),Object(m.jsx)("span",{children:"for"}),Object(m.jsx)("a",{href:"https://rs.school/js/",children:Object(m.jsx)("img",{src:"https://rs.school/images/rs_school_js.svg",alt:"rsschool",height:"20"})})]})}}]),a}(n.a.Component));a(38);function y(){var e=Object(l.b)(),t=Object(s.useState)(!1),a=Object(i.a)(t,2),n=a[0];a[1];return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(h,{}),Object(m.jsx)(l.a,{handle:e,className:"FS",children:Object(m.jsx)(v,{fsMode:n,fullscreen:e.enter})}),Object(m.jsx)(k,{})]})}o.a.render(Object(m.jsx)(y,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.a52cab49.chunk.js.map